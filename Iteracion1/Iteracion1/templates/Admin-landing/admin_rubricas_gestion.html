{% extends '../base.html' %}
{% load static %}
{%block content%}
<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:340px;margin-right:40px" <!-- Portada -->
  <div class="w3-container" id="portada" style="margin-top:80px; margin-bottom:10px">
    <h1 class="w3-xxxlarge w3-text-red"><b>Rúbricas</b></h1>
    <hr style="width:50px;border:5px solid red" class="w3-round">
  </div>

  <div class="w3-container">
    <button class="w3-button w3-large w3-red w3-right w3-round">Agregar nueva rúbrica</button><br>
  </div>
  <!--Seccion rubricas-->
  <!-- Rubricas de ejemplo, borrar
  <button onclick="myFunction('Demo3')" class="w3-btn w3-red w3-block w3-margin" style="width: 75%">
    <h3>
      Rúbrica 1</h3>
  </button>
  
  <div id="Demo3" class="w3-hide w3-container w3-pale-red w3-center w3-padding-large w3-margin" style="width: 75%">
    <p>
      <li>Aspecto 1</li>
      <li>Aspecto 2</li>
    </p>
    <div class="w3-container">
      <button class="w3-button w3-large w3-margin-right w3-red w3-left w3-round">Ver</button>
      <button class="w3-button w3-large w3-red w3-left w3-round">Modificar</button>
      <button class="w3-button w3-large w3-red w3-right w3-round">Eliminar</button>
    </div>
  </div>

  <button onclick="myFunction('Demo4')" class="w3-btn w3-red w3-block w3-margin" style="width: 75%">
    <h3>
      Rúbrica 2</h3>
  </button>

  <div id="Demo4" class="w3-hide w3-container w3-pale-red w3-center w3-padding-large w3-margin" style="width: 75%">
    <p>
      <li>Aspecto 1</li>
      <li>Aspecto 2</li>
    </p>
    <div class="w3-container">
      <button class="w3-button w3-large w3-margin-right w3-red w3-left w3-round">Ver</button>
      <button class="w3-button w3-large w3-red w3-left w3-round">Modificar</button>
      <button class="w3-button w3-large w3-red w3-right w3-round">Eliminar</button>
    </div>
  </div>
  -->
  <!-- Rubricas de la base de datos-->
  {% for rubrica in object_list %}
  <button onclick="myFunction('{{rubrica.id}}')" class="w3-btn w3-red w3-block w3-margin" style="width: 75%">
    <h3>
      {{ rubrica.nombre }}</h3>
  </button>
  <div id="{{rubrica.id}}" class="w3-hide w3-container w3-pale-red w3-center w3-padding-large w3-margin"
    style="width: 75%">
    <p class="parrafo"></p>
    <div class="w3-container">
      <button class="w3-button w3-large w3-margin-right w3-red w3-left w3-round">Ver</button>
      <button class="w3-button w3-large w3-red w3-left w3-round">Modificar</button>
      <button class="w3-button w3-large w3-red w3-right w3-round">Eliminar</button>
    </div>
  </div>
  {% empty %}
  <button class="w3-btn w3-red w3-block w3-margin" style="width: 75%">
    <h3>
      No hay rubrica creada aun</h3>
  </button>
  {% endfor %}
</div>




</div>
<script>
  function myFunction(id) {
    fetch("/ajax/datos?query_id=" + id, {
      method: 'GET',
      headers: { //headers of the submition
        'Accept': 'application/json, text/plain, */*',
        'Content-type': 'application/json',
        'X-Requested-With': 'XMLHttpRequest'
      },
      credentials: 'include'
    })
      .then((response) => {
        return response.json();
      })
      .then(data => {
        let option = document.getElementById(id);
        let p = option.querySelector(".parrafo");
        p.innerHTML = "";
        let arr = [];
        for(let k in data){
          let li = document.createElement("li");
          let texto = document.createTextNode(data[k]);
          li.appendChild(texto);
          p.appendChild(li);
        }
        let x = document.getElementById(id);
        if (x.className.indexOf("w3-show") == -1) {
          x.className += " w3-show";
        } else {
          x.className = x.className.replace(" w3-show", "");
        }
      });
  }
</script>
{% endblock%}